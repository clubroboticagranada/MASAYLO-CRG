<!doctype html><html lang=es class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="MASAYLO-CRG es un robot creado a partir de la idea de Antonio Gómez (https://github.com/agomezgar/masaylo) del que se van a desarrollar las tres versiones que se describen en la documentación y que tiene como propósito principal ser un robot sencillo de imprimir y de construir y que pueda servir para iniciar en el tema STEAM al alumnado desde los últimos cursos de educación primaria hasta bachillerato y ciclos formativos pasando por las distintas etapas de la ESO."><meta name=author content="Antonio Gómez, Pedro Ruiz, Manuel Hidalgo, Prudencio Luna, José Luis Bueno, Isabel Ruiz y Federico Coca"><link href=https://clubroboticagranada.github.io/MASAYLO-CRG/masayloBlockly/distanciaPuertoSerie/ rel=canonical><link rel=icon href=../../img/favicon.png><meta name=generator content="mkdocs-1.2.1, mkdocs-material-7.1.8"><title>Detección de obstáculos. Uso del puerto serie - MASAYLO-CRG</title><link rel=stylesheet href=../../assets/stylesheets/main.ca7ac06f.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.f1a3b89f.min.css><meta name=theme-color content=#02a6f2><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style></head> <body dir=ltr data-md-color-scheme data-md-color-primary=light-blue data-md-color-accent=deep-purple> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#deteccion-de-obstaculos-uso-del-puerto-serie class=md-skip> Saltar a contenido </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Cabecera> <a href=../.. title=MASAYLO-CRG class="md-header__button md-logo" aria-label=MASAYLO-CRG data-md-component=logo> <img src=../../img/favicon.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> MASAYLO-CRG </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Detección de obstáculos. Uso del puerto serie </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Búsqueda placeholder=Búsqueda autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Limpiar tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Inicializando búsqueda </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/clubroboticagranada/MASAYLO-CRG title="Ir al repositorio" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> clubroboticagranada/MASAYLO-CRG </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navegación data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=MASAYLO-CRG class="md-nav__button md-logo" aria-label=MASAYLO-CRG data-md-component=logo> <img src=../../img/favicon.png alt=logo> </a> MASAYLO-CRG </label> <div class=md-nav__source> <a href=https://github.com/clubroboticagranada/MASAYLO-CRG title="Ir al repositorio" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> clubroboticagranada/MASAYLO-CRG </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Introducción </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Materiales y Ficheros 3D <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Materiales y Ficheros 3D" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Materiales y Ficheros 3D </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ficheros/ class=md-nav__link> 3D alta precisión </a> </li> <li class=md-nav__item> <a href=../../ficheros-media/ class=md-nav__link> 3D precisión media </a> </li> <li class=md-nav__item> <a href=../../ensamble/ class=md-nav__link> Materiales necesarios y ensamblado plataforma base </a> </li> <li class=md-nav__item> <a href=../../ensamble-s/ class=md-nav__link> Materiales necesarios y ensamblado plataforma superior </a> </li> <li class=md-nav__item> <a href=../../ensambles/ class=md-nav__link> Ensamblados </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Versión UNO. Conexionado y pruebas <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Versión UNO. Conexionado y pruebas" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Versión UNO. Conexionado y pruebas </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../conexionado-pruebas/UNO/elementos/ class=md-nav__link> Análisis de elementos </a> </li> <li class=md-nav__item> <a href=../../conexionado-pruebas/UNO/conex/ class=md-nav__link> Conexionado </a> </li> <li class=md-nav__item> <a href=../../conexionado-pruebas/UNO/test/ class=md-nav__link> Pruebas básicas de funcionamiento </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Versión NANO. Conexionado y pruebas <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Versión NANO. Conexionado y pruebas" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Versión NANO. Conexionado y pruebas </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../conexionado-pruebas/NANO/leer-antes/ class=md-nav__link> ¡MUY IMPORTANTE! Leer antes de seguir </a> </li> <li class=md-nav__item> <a href=../../conexionado-pruebas/NANO/elementos-N/ class=md-nav__link> Análisis de elementos </a> </li> <li class=md-nav__item> <a href=../../conexionado-pruebas/NANO/conex-N/ class=md-nav__link> Conexionado </a> </li> <li class=md-nav__item> <a href=../../conexionado-pruebas/NANO/test-N/ class=md-nav__link> Pruebas básicas de funcionamiento </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Librería para Arduino <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Librería para Arduino" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Librería para Arduino </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../libreria/por_que/ class=md-nav__link> Por qué de la librería </a> </li> <li class=md-nav__item> <a href=../../libreria/instalacion/ class=md-nav__link> Instalación </a> </li> <li class=md-nav__item> <a href=../../libreria/incorporar_libreria/ class=md-nav__link> Incorporación de la librería en un programa </a> </li> <li class=md-nav__item> <a href=../../libreria/ejemplos/ class=md-nav__link> Ejemplos de Masaylo </a> </li> <li class=md-nav__item> <a href=../../libreria/motores/ class=md-nav__link> Control de motores y movimientos </a> </li> <li class=md-nav__item> <a href=../../libreria/ultrasonidos/ class=md-nav__link> Ultrasonidos. Detección de obstáculos </a> </li> <li class=md-nav__item> <a href=../../libreria/servos/ class=md-nav__link> Uso de Servomotores en cabeza y brazo </a> </li> <li class=md-nav__item> <a href=../../libreria/infrarrojos/ class=md-nav__link> Infrarrojos. Detección líneas negras </a> </li> <li class=md-nav__item> <a href=../../libreria/encoders/ class=md-nav__link> Encoders. Control de distancias y ángulos </a> </li> <li class=md-nav__item> <a href=../../libreria/zumbador/ class=md-nav__link> Zumbador. Sonidos </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6> Programación con MasayloBlockly <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Programación con MasayloBlockly" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Programación con MasayloBlockly </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../descarga/ class=md-nav__link> Descarga e instalación </a> </li> <li class=md-nav__item> <a href=../primerospasos/ class=md-nav__link> Primeros pasos </a> </li> <li class=md-nav__item> <a href=../instalacion/ class=md-nav__link> Instalación de librerías </a> </li> <li class=md-nav__item> <a href=../primerPrograma/ class=md-nav__link> Mi primer programa. Movimientos básicos </a> </li> <li class=md-nav__item> <a href=../PWM/ class=md-nav__link> Control de velocidad. Uso de PWM </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Detección de obstáculos. Uso del puerto serie <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Detección de obstáculos. Uso del puerto serie </a> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#que-es-el-monitor-del-puerto-serie class=md-nav__link> ¿Qué es el monitor del puerto serie? </a> </li> <li class=md-nav__item> <a href=#uso-del-sensor-de-ultrasonidos-como-detector-de-obstaculos class=md-nav__link> Uso del sensor de ultrasonidos como detector de obstáculos </a> </li> <li class=md-nav__item> <a href=#objetivos-de-la-practica class=md-nav__link> Objetivos de la práctica </a> <nav class=md-nav aria-label="Objetivos de la práctica"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#programa-lectura-de-distancias-medidas-por-el-sensor-us-a-traves-del-puerto-serie class=md-nav__link> Programa: lectura de distancias medidas por el sensor US a través del puerto serie </a> </li> <li class=md-nav__item> <a href=#resultado-lectura-de-distancias-a-traves-del-puerto-serie class=md-nav__link> Resultado: lectura de distancias a través del puerto serie </a> </li> <li class=md-nav__item> <a href=#ejercicio-de-ampliacion-programar-un-sistema-de-desplazamiento-que-evite-obstaculos class=md-nav__link> Ejercicio de ampliación: programar un sistema de desplazamiento que evite obstáculos </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#video-explicativo-uso-del-puerto-serie-para-leer-distancias-a-obstaculos-detectados class=md-nav__link> Vídeo explicativo: uso del puerto serie para leer distancias a obstáculos detectados </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../sensoresIR/ class=md-nav__link> Introducción a los bloques lógicos. Uso de sensores de infrarrojos. </a> </li> <li class=md-nav__item> <a href=../encoder/ class=md-nav__link> Trabajo con encoder. Control básico de distancias y ángulos </a> </li> <li class=md-nav__item> <a href=../servos/ class=md-nav__link> Uso de servomotores en brazo y cabeza </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Presentaciones de MASAYLO <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Presentaciones de MASAYLO" data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Presentaciones de MASAYLO </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../presentaciones/presentacion1/ class=md-nav__link> Primera presentación </a> </li> <li class=md-nav__item> <a href=../../presentaciones/medios/ class=md-nav__link> Apariciones en medios de comunicación </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Miscelanea <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Miscelanea data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Miscelanea </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Miscelanea/about/ class=md-nav__link> Autores </a> </li> <li class=md-nav__item> <a href=../../Miscelanea/lic/ class=md-nav__link> Licencias </a> </li> <li class=md-nav__item> <a href=../../Miscelanea/webgrafia/ class=md-nav__link> Webgrafia/Bibliografía </a> </li> <li class=md-nav__item> <a href=../../Miscelanea/soft/ class=md-nav__link> Software utilizado </a> </li> <li class=md-nav__item> <a href=../../Miscelanea/merchandising/ class=md-nav__link> Merchandising </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#que-es-el-monitor-del-puerto-serie class=md-nav__link> ¿Qué es el monitor del puerto serie? </a> </li> <li class=md-nav__item> <a href=#uso-del-sensor-de-ultrasonidos-como-detector-de-obstaculos class=md-nav__link> Uso del sensor de ultrasonidos como detector de obstáculos </a> </li> <li class=md-nav__item> <a href=#objetivos-de-la-practica class=md-nav__link> Objetivos de la práctica </a> <nav class=md-nav aria-label="Objetivos de la práctica"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#programa-lectura-de-distancias-medidas-por-el-sensor-us-a-traves-del-puerto-serie class=md-nav__link> Programa: lectura de distancias medidas por el sensor US a través del puerto serie </a> </li> <li class=md-nav__item> <a href=#resultado-lectura-de-distancias-a-traves-del-puerto-serie class=md-nav__link> Resultado: lectura de distancias a través del puerto serie </a> </li> <li class=md-nav__item> <a href=#ejercicio-de-ampliacion-programar-un-sistema-de-desplazamiento-que-evite-obstaculos class=md-nav__link> Ejercicio de ampliación: programar un sistema de desplazamiento que evite obstáculos </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#video-explicativo-uso-del-puerto-serie-para-leer-distancias-a-obstaculos-detectados class=md-nav__link> Vídeo explicativo: uso del puerto serie para leer distancias a obstáculos detectados </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=deteccion-de-obstaculos-uso-del-puerto-serie><font color=#8B008B>Detección de obstáculos. Uso del puerto serie</font><a class=headerlink href=#deteccion-de-obstaculos-uso-del-puerto-serie title="Permanent link">&para;</a></h1> <p>En esta práctica aprenderemos a inicializar el sensor de ultrasonidos HC-SR04 del robot Masaylo y utilizarlo para detectar obstáculos, calcular la distancia a la que se encuentran y enviar dicho dato a nuestro ordenador para que podamos leerlo de manera directa a través del <em>monitor del puerto serie</em></p> <h2 id=que-es-el-monitor-del-puerto-serie><font color=#007575><strong>¿Qué es el monitor del puerto serie?</strong></font><a class=headerlink href=#que-es-el-monitor-del-puerto-serie title="Permanent link">&para;</a></h2> <p>El puerto serie es el canal de comunicación que utiliza Arduino para comunicarse con nuestro ordenador a través de nuestro cable USB, para cargar los programas compilados a través del IDE o enviar y recibir información. Los pines digitales 0 (Rx) y 1 (Tx) del microcontrolador son los encargados de realizar dicha comunicación, razón por la que se aconseja dejar ambas patillas sin conectar en nuestro sistema de control si vamos a necesitar comunicación o en el momento de cargar un nuevo programa.</p> <p>El IDE de Arduino nos facilita dicha comunicación utilizando los comandos <em>Serial.begin(velocidad)</em> (la velocidad estándar suele ser de 9600 baudios), y los comandos <em>Serial.print(texto)</em> para escribir, <em>Serial.println(texto)</em> para escribir con retorno de carro, o <em>Serial.read(dato)</em> para recibir información. Para abrir este canal de comunicación, dicha IDE nos ofrece un icono muy característico.</p> <p><center></p> <table> <thead> <tr> <th align=center>Icono de apertura del puerto serie en el IDE de Arduino</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Icono del puerto serie" src=../../img/masayloBlockly/iconoPuertoSerie.png></td> </tr> </tbody> </table> <p></center></p> <p>Al hacer click en dicho icono, se abre una nueva ventana en la que Arduino imprimirá la correspondiente información a medida que transcurra el programa.</p> <p><center></p> <table> <thead> <tr> <th align=center>Ventana del puerto serie en el IDE</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Ventana del puerto serie" src=../../img/masayloBlockly/IDEPuertoSerie.png></td> </tr> </tbody> </table> <p></center></p> <p>Como siempre, MasayloBlockly nos facilitará esta tarea. Dentro del conjunto de bloques de programación asignados a "modo experto" (alcanzable, como el lector recordará, a través del icono de preferencias <img alt=Configuracion src=../../img/masayloBlockly/iconoConfiguracion.png> ),podemos incluir en la zona de opciones el grupo "Puerto Serie", del que utilizaremos, en esta actividad de iniciación, las siguientes piezas:</p> <table> <thead> <tr> <th>Icono</th> <th>Función</th> </tr> </thead> <tbody> <tr> <td><img alt="Inicio del puerto serie" src=../../img/masayloBlockly/serialInit.png></td> <td>Inicializar el puerto serie a la velocidad en baudios indicada (9600 por defecto, configurable)</td> </tr> <tr> <td><img alt="Escribir línea" src=../../img/masayloBlockly/serialEscribirLinea.png></td> <td>Arduino escribirá en el puerto serie el texto o dato que le indiquemos (incluye un texto editable por defecto, pero lo sustituiremos por la lectura del sensor)</td> </tr> </tbody> </table> <p><font color=#ff0000><strong>NOTA: LA PIEZA DE INICIALIZACIÓN DEL PUERTO SERIE NO ESTÁ PREPARADA PARA ENCAJAR CON LAS OTRAS, PUESTO QUE HACE REFERENCIA A UNA TAREA DE CONFIGURACIÓN PREVIA AL HILO GENERAL QUE DESARROLLARÁ EL PROGRAMA. NO HAY PROBLEMA EN DEJARLA EN EL ESPACIO DE TRABAJO DE MODO INDEPENDIENTE DE LAS DEMÁS</strong></p> <p><strong>OTRA NOTA: POR MOTIVOS DE CONFIGURACIÓN, EL MONITOR DEL PUERTO SERIE DE MASAYLOBLOCKLY SÓLO DEVUELVE LECTURAS DESPUÉS DE LEER UN RETORNO DE CARRO. ESO SIGNIFICA QUE SI UTILIZAMOS LA PIEZA <em>ENVIAR A PUERTO SERIE</em> SIN COMPLETAR CON <em>ESCRIBIR LÍNEA</em>, NO APARECERÁ INFORMACIÓN ALGUNA EN LA VENTANA DE DICHO MONITOR</strong> </font></p> <p>Como actividad de ampliación, sugerimos al lector que utilice el bloque de opciones "Textos" disponible en el menú de preferencias para combinar textos con el resultado medido, tal y como podrá ver en la solución final que ofrecemos.</p> <h2 id=uso-del-sensor-de-ultrasonidos-como-detector-de-obstaculos><font color=#007575><strong>Uso del sensor de ultrasonidos como detector de obstáculos</strong></font><a class=headerlink href=#uso-del-sensor-de-ultrasonidos-como-detector-de-obstaculos title="Permanent link">&para;</a></h2> <p>En la sección de <a href=../../conexionado-pruebas/UNO/elementos/#sensor-de-distancia-hc-sr04>análisis de elementos de la versión UNO</a> se explica sobradamente las características y el conexionado del sensor de ultrasonidos. En MasayloBlockly es muy fácil inicializar el sensor de ultrasonidos indicando los pines a que hemos conectado <strong><em>ECHO</em></strong> y <strong><em>TRIGGER</em></strong>, y obtener lecturas periódicas de la distancia a cualquier obstáculo que se pueda encontrar en el rango de alcance de dicho sensor.</p> <p><center></p> <table> <thead> <tr> <th align=center>El sensor de ultrasonidos puede detectar obstáculos y medir su distancia</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Ventana del puerto serie" src=../../img/masayloBlockly/masaylo_distancia.png></td> </tr> </tbody> </table> <p></center></p> <p>Las piezas que utilizaremos para tal fin serán:</p> <table> <thead> <tr> <th>Icono</th> <th>Función</th> </tr> </thead> <tbody> <tr> <td><img alt="Inicialización del Sensor" src=../../img/masayloBlockly/initUS.png></td> <td>Inicializar el sensor de ultrasonidos indicando los pines TRIGGER y ECHO (por defecto, A2 y A3, pero la pieza es editable)</td> </tr> <tr> <td><img alt="Lectura de distancia" src=../../img/masayloBlockly/dameDistancia.png></td> <td>Esta pieza devuelve la lectura en cm indicada por el sensor en su última lectura</td> </tr> </tbody> </table> <h2 id=objetivos-de-la-practica><font color=#007575><strong>Objetivos de la práctica</strong></font><a class=headerlink href=#objetivos-de-la-practica title="Permanent link">&para;</a></h2> <p>Como ya hemos explicado, queremos mostrar el uso del puerto serie al usuario no avezado de un modo sencillo, utilizándolo como canal de comunicación para obtener las distancias obtenidas por el sensor de distancia en lecturas periódicas. Podemos, pues, establecer los siguientes objetivos:</p> <ul> <li>Inicializar el puerto serie del robot Masaylo estableciendo una velocidad estándar (9600 baudios).</li> <li>Inicializar el robot Masaylo indicando, en su caso, los pines de control de motores.</li> <li>Inicializar el sensor de ultrasonidos indicando los pines de conexión a <strong>TRIGGER</strong> y <strong>ECHO</strong>, en caso de ser distintos a los establecidos por defecto.</li> <li>Realizar una lectura de distancia y pasarla al puerto serie para su lectura por parte del usuario.</li> <li>Esperar un segundo.</li> <li>Repetir el bucle.</li> </ul> <p><center></p> <table> <thead> <tr> <th align=center>Práctica: lectura de distancias a través del puerto serie</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Leyendo el puerto serie" src=../../img/masayloBlockly/distanciaPuertoSerie.png></td> </tr> </tbody> </table> <p></center></p> <h3 id=programa-lectura-de-distancias-medidas-por-el-sensor-us-a-traves-del-puerto-serie><font color=#007575><strong>Programa: lectura de distancias medidas por el sensor US a través del puerto serie</strong></font><a class=headerlink href=#programa-lectura-de-distancias-medidas-por-el-sensor-us-a-traves-del-puerto-serie title="Permanent link">&para;</a></h3> <p>La siguiente imagen desarrolla el programa utilizado (<font color=#0000FF>Nota: este programa está disponible en el botón de Ejemplos del menú principal, con el título "Envía la distancia al obstáculo detectado al puerto serie de tu ordenador").</font></p> <p><center></p> <table> <thead> <tr> <th align=center>Programa: envío de los datos de distancia al puerto serie</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Programando con PWM" src=../../img/masayloBlockly/programaDistanciaSerie.png></td> </tr> </tbody> </table> <p></center></p> <h3 id=resultado-lectura-de-distancias-a-traves-del-puerto-serie><font color=#007575><strong>Resultado: lectura de distancias a través del puerto serie</strong></font><a class=headerlink href=#resultado-lectura-de-distancias-a-traves-del-puerto-serie title="Permanent link">&para;</a></h3> <p>Para abrir el monitor del puerto serie, sólo hay que hacer doble click en el icono <img alt="Monitor serie" src=../../img/masayloBlockly/iconoMonitor.png> para abrir la ventana del monitor y hacer click en el botón ***Arrancar** (debe asegurarse de que la velocidad estipulada es 9600) para iniciar la comunicación con el sistema de control del Masaylo:</p> <p><center></p> <table> <thead> <tr> <th align=center>Lectura de los datos de distancia usando el monitor de MasayloBlockly</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Leyendo el puerto serie" src=../../img/masayloBlockly/medicionPuertoSerie.png></td> </tr> </tbody> </table> <p></center></p> <h3 id=ejercicio-de-ampliacion-programar-un-sistema-de-desplazamiento-que-evite-obstaculos><font color=#007575><strong>Ejercicio de ampliación: programar un sistema de desplazamiento que evite obstáculos</strong></font><a class=headerlink href=#ejercicio-de-ampliacion-programar-un-sistema-de-desplazamiento-que-evite-obstaculos title="Permanent link">&para;</a></h3> <p>Con lo mostrado hasta aquí, el lector debería ya estar suficientemente capacitado para programar a Masaylo de modo que éste se mueva de forma autónoma evitando los obstáculos que se presenten. En el botón de Ejemplos del menú principal hay precisamente un algoritmo que cumple este objetivo, llamado "Aprende a detectar obstáculos con el sensor US y a esquivarlos mediante movimientos aleatorios".</p> <p><center></p> <table> <thead> <tr> <th align=center>Ejercicio de ampliación: movimiento autónomo con detección y evasión de obstáculos</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Leyendo el puerto serie" src=../../img/masayloBlockly/salvaObstaculosBasico.png></td> </tr> </tbody> </table> <p></center></p> <h2 id=video-explicativo-uso-del-puerto-serie-para-leer-distancias-a-obstaculos-detectados><font color=#007575><strong>Vídeo explicativo: uso del puerto serie para leer distancias a obstáculos detectados</strong></font><a class=headerlink href=#video-explicativo-uso-del-puerto-serie-para-leer-distancias-a-obstaculos-detectados title="Permanent link">&para;</a></h2> <iframe width=560 height=315 src=https://www.youtube.com/embed/zfkvxzSqDQE title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Pie> <a href=../PWM/ class="md-footer__link md-footer__link--prev" aria-label="Anterior: Control de velocidad. Uso de PWM" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Anterior </span> Control de velocidad. Uso de PWM </div> </div> </a> <a href=../sensoresIR/ class="md-footer__link md-footer__link--next" aria-label="Siguiente: Introducción a los bloques lógicos. Uso de sensores de infrarrojos." rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Siguiente </span> Introducción a los bloques lógicos. Uso de sensores de infrarrojos. </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright & copy; 2021 - 2030 Club Robótica Granada y Antonio Gómez </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.term.missing": "Falta", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.b0710199.min.js", "version": null}</script> <script src=../../assets/javascripts/bundle.76f349be.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>